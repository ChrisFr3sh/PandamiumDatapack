#when an entity teleports out of the render distance, its teleport destination is still sent, unless it changes the dimension

tp ~ 0 ~
scoreboard players set <near_players> variable 0
execute positioned as @a[x=0,gamemode=!spectator] positioned ~-512 0 ~-512 if entity @s[dx=1023,dz=1023] run scoreboard players add <near_players> variable 1
execute if score <near_players> variable matches 2.. in pandamium:staff_world run tp 29999999 19999999 29999999

#a cheater could fly above y=20000000, bring their alt account there, and then tpa to them
#the tp ~ ~ ~ command would fail, and they would stay in the pandamium:staff_world dimension
#therefore we need to teleport to a safe y coordinate
tp ~ 256 ~

#in case the player won't be teleported afterwards (e.g. due to invalid coordinates after this function)
tp ~ ~ ~
